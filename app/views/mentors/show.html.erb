<% user = @mentor.user %>
<h1><%= user.username %></h1>
<!-- This checks if the user has an image attached to their profile using Active Storage. If they do have an image attached, it will display that image. If not, it will display the default image kept in ass/assets/images. -->
<% if user.avatar.attached? %>
  <%= image_tag user.avatar, class: "card-img-top", alt: "" %>
<% else %>
  <%= image_tag("default-user-profile.jpg", class: "card-img-top", alt: "") %>
<% end %>

<p>Purpose: <%= user.purpose %></p>
<p>About Me: <%= user.about_me %></p>

<p>Skills: <%= @mentor.skills %></p>
<p>Availability: <%= @mentor.availability %></p>
<p>Price: <%= number_to_currency(@mentor.price / 100.0) %></p>

<!-- Book now button related to Stripe -->

<%= form_tag charges_path do %>
  <article>
    <% if flash[:error].present? %>
      <div id="error_explanation">
        <p><%= flash[:error] %></p>
      </div>
    <% end %>
  </article>

    <%= hidden_field_tag(:mentor_id, @mentor.id) %>

  <script src="https://checkout.stripe.com/checkout.js" class="stripe-button"
          data-key="<%= Rails.configuration.stripe[:publishable_key] %>"
          data-description="Booking with: <%= @mentor.user.username %>"
          data-amount="<%= @mentor.price %>"
          data-currency="aud"
          data-locale="auto"></script>
<% end %>